precision mediump float;

//Shared in shaders
uniform sampler2D u_texture;
uniform float u_time;

varying vec2 v_texcoord;

void main() {
    // 游꿢 Snurra texturen runt cylindern
    float angleOffset = u_time * 0.5; // snurrhastighet

    // L칛gg p친 snurr
    float rotatedU = fract(v_texcoord.x + angleOffset);

    // 游꿢 Scrolla texturen upp친t
    float scrolledV = fract(v_texcoord.y - u_time);

    // 游꿢 Sl친 upp textur
    vec2 sampleUV = vec2(rotatedU, scrolledV);
    vec4 tex = texture2D(u_texture, sampleUV);

    // 游꿢 Fyllf칛rg och styrka
    vec3 color = tex.rgb * vec3(0.6, 0.8, 1.0); // bl친aktig virvel

    // 游꿢 Transparens mot cylinderkanterna (tunna kanten)
    float edgeFade = smoothstep(0.0, 0.1, v_texcoord.y) * smoothstep(1.0, 0.9, v_texcoord.y);

    // 游꿢 L칛gg p친 extra fade (t.ex. fr친n textur alpha)
    float alpha = tex.r * edgeFade;
    if(tex.r < 0.5){
        discard;
    }

    gl_FragColor = vec4(color, alpha);
}